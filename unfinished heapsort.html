<html>
<script>
Function HeapAdjust(arry,i,size)  //调整堆 
{
    var lchild=2*i;       //i的左孩子节点序号 
    var rchild=2*i+1;     //i的右孩子节点序号 
    var max=i;            //临时变量 
    if(i<=size/2)          //如果i不是叶节点就不用进行调整 
    {
        if(lchild<=size&&arry[lchild]>arry[max])
        {
            max=lchild;
        }           
        if(rchild<=size&&arry[rchild]>arry[max])
        {
            max=rchild;
        }
        if(max!=i)
        {
            swap(arry[i],arry[max]);
            HeapAdjust(arry,max,size);    //避免调整之后以max为父节点的子树不是堆 
        }
    }        
}

Function BuildHeap(arry,size)    //建立堆 
{
    var i;
    for(i=size/2;i>=1;i--)    //非叶节点最大序号值为size/2 
    {
        HeapAdjust(arry,i,size);    
    }    
} 

Function HeapSort(arry,size)    //堆排序 
{
    var i;
    BuildHeap(arry,size);
    for(i=size;i>=1;i--)
    {
        swap(arry[1],arry[i]);           //交换堆顶和最后一个元素，即每次将剩余元素中的最大者放到最后面 
          //BuildHeap(a,i-1);        //将余下元素重新建立为大顶堆 
          HeapAdjust(arry,1,i-1);      //重新调整堆顶节点成为大顶堆
    }
} 


</script>
</head>
 
<body>
<input type="text" />
<input type="text" />
<input type="button" id="btn" onclick="HeapSort()" value="sort"/>
<input type="text" />
</body>
</html>           
